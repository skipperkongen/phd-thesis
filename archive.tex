\documentclass[11pt, oneside]{report}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage{geometry}                		% See geometry.pdf to learn the layout options. There are lots.
\geometry{letterpaper}                   		% ... or a4paper or a5paper or ... 
%\geometry{landscape}                		% Activate for for rotated page geometry
%\usepackage[parfill]{parskip}    		% Activate to begin paragraphs with an empty line rather than an indent
\usepackage{graphicx}				% Use pdf, png, jpg, or eps with pdflatex; use eps in DVI mode
								% TeX will automatically convert eps --> pdf in pdflatex		
\usepackage{amssymb}

% Copied from Marcos Style:
\setlength{\parindent}{0px}
\setlength{\parskip}{1em}

\title{Declarative Design and Efficient Serving of Web-Based Zoomable Maps}
\author{Pimin Konstantin Kefaloukos}
%\date{}							% Activate to display a given date or no date

\begin{document}
\maketitle

\tableofcontents

\chapter{Introduction}

\section{Motivation}
Web-based multiscale visualizations are important because users can explore and interact intuitively with information on the go -- using heterogenous devices (smartphones, tablets, personal computers) and in various life situations (at home, at the office, on the bus).  Specifically, professional and private users can explore information at different focal points and different levels of abstraction, which facilitates insights and decision making -- e.g. using plots to understand complex financial data or using zoomable geographical maps to find a nice restaurant within a city. Some important types of information are \emph{spatial}, \emph{social} and \emph{temporal} data, which can be visualized using e.g. \emph{maps}, \emph{networks} and \emph{timelines}, respectively. Among these verticals, the focus of this dissertation will be on spatial data and geographical maps. However, many of the contributions are directly applicable in the other domains also. Spatial data and geographical maps have important use cases, e.g. in social media, news, science and governance.

Driven by the exponential growth in spatial data online~\cite{foo,foo,foo}, web-based zoomable maps have recently attracted much larger audiences and can potentially integrate much larger and constantly evolving repositories of data~\cite{gst, foo}. This poses two high-level challenges to map designers and system engineers. First, map designers must efficiently and effectively address the dual problems of \emph{data abstraction} (e.g. selection and aggregation of information) and \emph{visual abstraction} (e.g. choice of information styles)~\cite{stolte2003multiscale}. Second, system engineers must cost-effectively manage a brutal query workload as online users engage a map application.

\chapter{Survey of Multiscale Data Abstraction}

Recently, computers have offered the opportunity for \emph{logical zooming}. In contrast to physical zooming, which is limited to enlarging and diminishing objects, a logical zoom (enabled by computers) can adapt the data- and visual abstraction of information to scale~\cite{van1990reactive}. OK REVIEW THIS. RECALL THAT.
\begin{quote}
What is still missing are methods combining the advantages of both approaches, that is, real-time algo- rithms for point generalization exploiting hierarchical spa- tial data structures.
\end{quote}

Data abstraction can rely on an appropriate datastructure, e.g. B-tree~\cite{nutanong2012multiresolution}, point region quad tree~\cite{bereuter2013real}, gap tree~\cite{van1995gap}, quaternary triangular mesh (QTM)~\cite{dutton1999hierarchical} or k-d tree~\cite{de2004simplifying}. Off-line fashion data abstraction is performed by solving a heavier problem, e.g. involving combinatorial optimization~\cite{kefaloukos2014declarative,haunert2006landcover,sarma2012fusiontables}.


Conventionally, geographical map creation involves four tasks: \emph{editing}, \emph{projection}, \emph{generalization} and \emph{design}.

\begin{quote}
In comparison to map generalization for paper maps, map generalization for mobile mapping and interactive web mapping has a different set of requirements, in particular its need for on-the-fly (or real-time) generalization and adaptation to user interaction and content. Web or mobile mapping applications, such as mashups or location-based services (LBS), typically display some thematic fore- ground data – predominantly in the form of point data such as points of interest (POIs) or large point collections – against the spatial reference provided by some back- ground data (e.g. a topographic map or orthoimagery).
\end{quote}


In 1973, the International Cartographic Association (ICA) defined 

``In conventional cartography, map generalisation is responsible for reducing complexity in a map in a scale reduction process, emphasising the essential while suppressing the unimportant, maintaining logical and unambiguous relations between map objects, and preserving aesthetic quality. The main objective then is to create maps of high graphical clarity, so that the map image can be easily perceived and the message the map intends to deliver can be readily understood. This position is expressed by the concise definition which equates map generalisation to ‘the selection and simplified representation of detail appropriate to the scale and/or the purpose of a map’ (ICA 1973: 173)."~\cite{weibel1999generalising}

Mankind has created spatial visualizations of the natural world since the earliest years of our habitation on planet Earth. For the most part, these visualizations have been hand-crafted and analog artifacts, such as clay tablets and hand-inked paper sheets.

\subsection{Brief History}
\label{sec:history}
On a cave wall in Lascaux, France, a series of dots dating to 16.500 BC have captured the imagination of scholars. These ancient dots are arranged so much like well-known constellations, that some scholars believe them to be a celestial map. On a clear night, the stone-age sky above Lascaux would have contained thousands of visible stars; clearly the artist did not paint them all. Before setting to work, the artist probably made two key decisions, namely \emph{which} stars to paint and \emph{how} to paint them. Today, data visualization scholars will recognize these processes as \emph{data abstraction} and \emph{visual abstraction}, respectively~\cite{stolte2003multiscale}. Each of these two processes aim to fulfill two goals. First, maps should be legible to their audience. Second, maps should be representative of the phenomena they offer information about. These goals are somewhat conflicting, because in order to be legible, we must generally omit some information, thus decreasing representation.

A few thousand years after the Lascaux cave walls were painted, man turned his attention to the ground beneath his feet. In Mesopotamia, clay tablets dating to 2.500 BC depict what is essentially a cadastral map~\cite{harley1987cartography}. Cadastral maps must enable correct identification of land owners. So, if the physical borders of the land parcels are cleared marked with stone-walls, a cadastral map only needs to satisfy topological constraints (not reflect physical reality). In other words, maps should fulfill their purpose.

\subsection{Basic Principles}
In a nutshell, a map must be \emph{useful}~\cite{robinson1982early}. However, this goal is not very instructive, so it must be be broken down into clear principles.

\vspace{-1em}
\paragraph{Maps Must Be Legible}


\subsection{Constant Information Density}
In 1961, the cartographer Friedrich T\"{o}pfer proposed the \emph{Principle of Selection}, which states that the number of objects per display unit should be constant~\cite{topfer1966principles}. In 1998, Allison Woodruff et al. revamped the principle for (computer-based) multiscale visualizations and called it the \emph{Principle of Constant Information Density} (PoCID)~\cite{woodruff1998constant}. The main purpose of PoCID is to avoid information over- or underload when the scale of a map changes. In general, the density of information will increase exponentially as the scale is decreased linearly.


 which implies that it should be applied during the data- and visual abstraction processes. The soundness of the principle has been verified empirically, e.g. by counting the number of settlements shown per unit display area on different hand-crafted maps of Scotland~\cite{topfer1966principles}. 

\paragraph{Maps Must Show Relevant Objects}

A map must be designed foremost with consideration to the audience and its needs~\cite{robinson1982early}. This implies that maps do not necessarily need to reflect the land as a surveyor would see it, i.e. using precisely projected coordinates for data. A good example is a \emph{subway map}, which shows the lines, stations and connection points of a subway train network. Here, the emphasis is on topological correctness. By contrast, a \emph{nautical map} will typically emphasize angular correctness in order to facilitate position fixing by measuring the bearing to reference points.





\paragraph{Constant Information Density}
In 1961, the cartographer Friedrich T\"{o}pfer proposed the \emph{Principle of Selection}, which states that the number of objects per display unit should be constant~\cite{topfer1966principles}. In 1998, Allison Woodruff et al. revamped the principle for (computer-based) multiscale visualizations and called it the \emph{Principle of Constant Information Density}~\cite{woodruff1998constant}. However, it is not fundamentally different from the principle identified by Friedrich T\"{o}pfer. The main purpose of the principle is to maintain a legible visualization when the scale changes, which implies that it should be applied during the data- and visual abstraction processes. The soundness of the principle has been verified empirically, e.g. by counting the number of settlements shown per unit display area on different hand-crafted maps of Scotland~\cite{topfer1966principles}. 

It is not difficult to understand why the Principle of Constant Information Density must be true. Screens have a fixed number of pixels for rendering objects, and similarly, sheets of paper have a fixed area on which to place ink. There is a physical bound on how much information can be represented per unit display area (e.g. a few thousand pixels per $cm^2$ on a computer screen). Simultaneously, there is a lower bound on how small things can get and still remain legible to the human eye.

\subsection{Implementing logical zoom}
Recently, computers have offered the opportunity for \emph{logical zooming}. In contrast to physical zooming, which is limited to enlarging and diminishing objects, a logical zoom (enabled by computers) can adapt the data- and visual abstraction of information to scale~\cite{van1990reactive}. This can be done in an online fashion using an appropriate datastructure (e.g. B-tree, quad trees or gap tree)~\cite{van1995gap,bereuter2013real,nutanong2012multiresolution}, or in an off-line fashion using a preprocessing algorithm (e.g. combinatorial optimization)~\cite{kefaloukos2014declarative,haunert2006landcover,sarma2012fusiontables}.

\section{The State-of-the-Art in Web-based Zoomable Maps}

\subsection{Designing Zoomable Maps}

\subsection{Serving Workloads for Maps}

Vector tiles, Linearization, Partitioning, Compression, Streaming, Key-value stores and caches, Prediction, 

\section{Research Gaps in Web-based Zoomable Maps}

\section{Contributions in this Dissertation}

\subsection{Geographical Workload Prediction}

\subsection{Cartographic Visualization Language}

\subsection{Multiscale Data Abstraction Language}

\subsection{Publications}

\section{Structure of this Dissertation}

Related work is discussed in the relevant sections.

\chapter{Geographical Workload Prediction}

\chapter{Cartographic Visualization Language}

\chapter{Multiscale Data Abstraction Language}

\section{Related work}



% old
\section{Definitions}
The topic of this chapter is multiscale visualization of \emph{discrete spatial objects} that are embedded in a \emph{metric two-dimensional space}. The main focus will be geographical maps, but visualization concepts that apply beyond the geospatial domain, will sometimes be exemplified in other domains (e.g. temporal, social, financial, etc.). This is important, because in fact the core principles of multiscale visualization apply very broadly to many different domains. Objects are assumed to have meaningful coordinates in some metric two-dimensional space. Notice that an objects object may have one coordinate (a point object) or several coordinates (a line or polygon objects). An example of a point object is a company that is represented by its revenue and employee count.

A two-dimensional space has two axes, $x$ and $y$. For multiscale visualizations, we may think of the \emph{scale} as a third axis, $z$. In geography, scale is defined as the ratio between a distance measured on a map and the corresponding distance on the ground. However, the $x$ and $y$ axes can have any unit, e.g. life expectance and BNP, revenue earned and taxed payed etc.

Multiscale visualizations allow panning and zooming, which are exactly what makes them \emph{multiscale} (i.e. visualizing information at different scales).  While we may have an intuitive idea of what these operations do, we need clear semantics.

\begin{quote}
``Users view the canvas as if with a camera that moves in three-dimensional space but always points straight down at the canvas. Users can pan across the canvas (changing the x,y location of the camera). Users can also zoom in and out above the canvas (changing the z location, or elevation, of the camera). Because a given set of objects looks different when seen from different elevations, a visualization that is appealing at one elevation is likely to be unappealing at another.''~\cite{woodruff1998constant}
\end{quote}

\begin{quote}
``The display seen by the user is a fixed-size viewport onto an underlying, or native, coordinate space defined by the x,y values of the objects. The objects never change their native x,y position, so object density in the native space obviously never changes. However, any change in elevation implies a change in the area of the native space visible in the display, which implies (in general) that the display contains a different number of objects. This in turn implies a change in display object density. As a result, the same visualization can be appealing at one''
\end{quote}

% SECTION
\section{Physical and logical zoom}

The cave wall and clay tablet visualizations that were mentioned in Section~\ref{sec:history}, are analog visualizations of information. Concepts such as data abstraction, visual abstraction and constraints (e.g. topological constraints) apply to both analog and digital visualizations. However, the concept of a logical zoom applies solely to digital visualizations. 




\begin{quote}
``Objects change representation as users zoom closer to them. For example, when a user zooms closer to a circle representing a city, the name of the city may appear next to the circle.''
\end{quote}

Physical zooming (e.g. using a pair of binoculars) only enlarges objects. By contrast, computer-aided data visualizations enable \emph{logical zooming} that allows the visualization to evolve in response to scale change~\cite{van1990reactive}. For example, when zooming in, new data points can be selected or existing data points can be drawn differently (e.g. in more detail).

\paragraph{data abstraction}

Cite wolff. Cite fusion tables. Cite me. Cite 

\paragraph{visual abstraction}

Cite Bertand.

% SECTION
\section{Information density}

\paragraph{Density measures}

Information density can be measured using different metrics.

\begin{quote}
Our system currently supports two density metrics, number of objects and number of vertices. There are a number of other metrics that could be used, e.g., Tufte's data density~\cite{tufte1983visual}. For a thorough review see~\cite{nickerson1994visual}.
\end{quote}

\begin{quote}
``For example, the ink metric (the number of live pixels) is not elevation-sensitive. To see this, imagine that the canvas contains a chessboard and that black pixels are live. Since half the pixels are white and half are black, 50\% of the pixels are live. Now imagine zooming closer to the chessboard. The view changes considerably, but the pixel distribution remains the same. Therefore, ink is probably not an appropriate density metric for zoomable applications.''
\end{quote}

\paragraph{Principle of Constant information Density}

\begin{quote}
``A guiding principle that addresses this issue can be derived from the Principle of Constant Information Density, drawn from the cartographic literature [5,18]. This principle states that the number of objects per display unit should be constant. A more general formulation posits that the amount of information (as defined by metrics discussed below) should remain constant as the user pans and zooms. To maintain constant information density, either (1) objects should be shown at greater detail when the user is closer to them, or (2) more objects should appear as the user zooms into the canvas, or (3) both.''
\end{quote}

In 1961, the cartographer Friedrich T\"{o}pfer proposed the \emph{Principle of Selection}, which states that the number of objects per display unit should be constant~\cite{topfer1966principles}. In 1998, Allison Woodruff et al. revamped the principle for (computer-based) multiscale visualizations and called it the \emph{Principle of Constant Information Density}~\cite{woodruff1998constant}. However, it is not fundamentally different from the principle identified by Friedrich T\"{o}pfer. The main purpose of the principle is to maintain a legible visualization when the scale changes, which implies that it should be applied during the data- and visual abstraction processes. The soundness of the principle has been verified empirically, e.g. by counting the number of settlements shown per unit display area on different hand-crafted maps of Scotland~\cite{topfer1966principles}. 

It is not difficult to understand why the Principle of Constant Information Density must be true. Screens have a fixed number of pixels for rendering objects, and similarly, sheets of paper have a fixed area on which to place ink. There is a physical bound on how much information can be represented per unit display area (e.g. a few thousand pixels per $cm^2$ on a computer screen). Simultaneously, there is a lower bound on how small things can get and still remain legible to the human eye.

\section{Constraints}

Cite weibel, who has a good overview of constraint types. Maybe Lars Harrie.

\paragraph{Visibility constraint}
In 2012, Das Sarma et al. published a paper that listed the requirements for multiscale map visualizations, which are supported by the commercially available Google Fusion Tables system~\cite{sarma2012fusiontables}. One requirement is that visualizations must satisfyt he \emph{visibility} constraint, which is closely related to the Principle of Constant Information Density. This constraint states that the number of objects that are visible within a unit display area must be bounded by a constant $K$. Assuming that objects have roughly equal density, this implies that the principle of constant information density is upheld.

%Back when the earth was believed to be flat, assuming that Eratosthenes was not around to suggest otherwise, 

\paragraph{Zoom-consistency}
Another constraint mentioned by Das Sarma et al. is  \emph{zoom-consistency} constraint; when a user zoom in, new objects may appear on the map, but must never disappear. Mathematically, if $S_z$ is the set of objects selected at scale $z$, then $S_z \subseteq S_{z'}$ for all $z < z'$. Intuitively, you must never loose sight of an object when zooming in on it.



\section{Modern-age Data Visualization}

\chapter{Multiscale Geographical Maps}
% section
Illustrate importance of multiscale visualization via reference to information cartography, data cube visualization, evolutionary timelines, social network visualizations and digital maps.

% section
\section{Principles}
Mention Weibel definition (salience etc). Reference woodruff and toepfer (constant information density). Reference da sarma (zoom consistency and visibility constraint). Reference samet (proximity constraint). Reference someone for topological constraints.
% section

\section{Multiscale Abstraction}
Define difference between data- and visual abstraction, reference data cube paper. Reuse points and figures from ICDE 2014 presentation (what to display versus how to display). Mention the geographical terms of model generalization and cartographic generalization (reference Gruenreich). 

\subsection{Data abstraction}
Mention that data abstraction for maps is surveyed in Part I chapter 1.

\subsubsection{}

\subsection{Visual abstraction}
Reference visual variables.

\section{Case Study: Danish Geodata Agency}
Mention GST and their use cases (POI and place names).

\chapter{Map Services}

\section{Map Services}
Talk about how map services are used.

\section{Case Study: Danish Geodata Agency}
Mention GST and their use cases (POI and place names).


\part{Producing Maps}

\chapter{Related work}
\paragraph{DataSplash} DataSplash allows users to control the range of elevations at which each layer is rendered. To this end, each layer appears as a vertical bar in a layer manager. The top of the layer bar represents the highest elevation at which objects in the layer are rendered. Similarly, the bottom of the layer bar represents the lowest elevation at which objects in the layer are rendered. The user's current elevation is shown with a horizontal elevation bar. Any layer bar that is crossed by the horizontal elevation bar is considered to be active and objects in the corresponding layer are rendered. In ``Constant information density in zoomable interfaces'', density feedback is added to the layer manager. First, the width of each layer bar now reflects the density of the corresponding layer at the given elevation. Second, the layer manager now relates the cumulative density value at each elevation to the density bounds. In that same paper, they also added semi-automated adjustment of layer density.


\chapter{Data abstraction methods for maps}
Survey the literature.

Reference Weibel and Harrie (constraint-based approach and salience). Reference Wollf (land use IP). Reference Da Sarma (fusion tables IP).


\chapter{}


\part{Serving Maps}

\bibliographystyle{plain}
\bibliography{thesis}
                             % Sample .bib file with references that match those in
                             % the 'Specifications Document (V1.5)' as well containing
                             % 'legacy' bibs and bibs with 'alternate codings'.
                             % Gerry Murray - March 2012



Marcos ambitious idea, three parts:
- (I) Introduction: talk about the two chapters that follow. 
- (P1) Pt 1: bulk: declarative cartography, about PRODUCING maps
- (P2) Pt 2: about SERVING digital maps
- Similar structure for both: state of the art, my contributions (advancing the state of the art).  

What-goes-where:
- I <- Case Study, P1 enables P2, Mention where related work is (which parts/chapters)
- P1 <- 
        Survey generalization, 
        CVL1 (closing the gap, part a), 
        CVL2 (closing the gap, part b)
- P2 <- 
        Survey on serving maps, getting to keyed data for maps, all this stuff you can use 
                incl. vectile (step 2),
                caching,
                prediction,
                data partitioning (step 3), 
                replication (step 4), 
                consistency, 
                key-value stores, 
                classic web serving infrastructures,
                papers from seminar
        Gap between state of the art, and the agency
        TileHeat (closing the gap, step 1), deploying a caching infrastructure
        
Publication strategy:

CVL2 (it's a journal thing, not a conference submission):
Approach: "Make CVL more general (star approach), with comparable performance"
- GeoInformatica (extended version of CVL), "completeness/thoroughness": repeat experiments, show new use cases (comp. to CVL), illustrate CVL2 with the new use cases 
- Only conference if "technical fun" or "something new" in compiler, real tech. take-away

\end{document}  

